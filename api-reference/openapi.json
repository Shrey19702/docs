{
  "openapi": "3.0.1",
  "info": {
    "title": "AI Content Detection API",
    "description": "An API for detecting AI-generated or modified images and videos. It provides a basic, fast analysis and a more in-depth, advanced analysis.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.example.com/v1",
      "description": "Production Server"
    }
  ],
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "API_KEY",
        "description": "API Key in the 'Authorization' header. Example: 'Authorization: Bearer YOUR_API_KEY'"
      }
    },
    "schemas": {
      "BasicAnalysisResult": {
        "type": "object",
        "properties": {
          "ai_detection_result": {
            "type": "string",
            "enum": ["yes", "no"],
            "description": "Indicates if the file is detected as AI-generated or modified.",
            "example": "yes"
          },
          "ai_detection_score": {
            "type": "number",
            "format": "float",
            "minimum": 0,
            "maximum": 1,
            "description": "A confidence score between 0.0 (definitely not AI) and 1.0 (definitely AI).",
            "example": 0.92
          },
          "reasoning": {
            "type": "string",
            "description": "A text explanation for the detection result.",
            "example": "Analysis of frequency domain artifacts and generator-specific patterns indicates a high probability of generation by a StyleGAN-based model."
          }
        },
        "required": [
          "ai_detection_result",
          "ai_detection_score",
          "reasoning"
        ]
      },
      "AdvancedAnalysisSubResults": {
        "type": "object",
        "properties": {
          "heatmap": {
            "type": "string",
            "format": "uri",
            "description": "A URL pointing to a heatmap image highlighting regions likely generated by AI.",
            "example": "https://storage.example.com/results/heatmap_xyz123.png"
          },
          "watermark_check_result": {
            "type": "string",
            "description": "Result of checking for known AI generator watermarks.",
            "example": "No known watermarks detected."
          },
          "factually_correct": {
            "type": "string",
            "description": "An assessment of the logical or factual correctness of the content (e.g., a person with six fingers).",
            "enum": ["Correct", "Incorrect", "Not Applicable"],
            "example": "Incorrect"
          },
          "file_metadata_analysis": {
            "type": "string",
            "description": "Result of analyzing the file's metadata for signs of AI generation tools.",
            "example": "Metadata contains 'generator' tag pointing to a known AI tool."
          }
        },
        "required": [
          "heatmap",
          "watermark_check_result",
          "factually_correct",
          "file_metadata_analysis"
        ]
      },
      "AdvancedAnalysisResult": {
        "type": "object",
        "properties": {
          "advance_ai_detection_result": {
            "type": "string",
            "enum": ["yes", "no"],
            "description": "Indicates if the file is detected as AI-generated or modified.",
            "example": "yes"
          },
          "advance_ai_detection_score": {
            "type": "number",
            "format": "float",
            "minimum": 0,
            "maximum": 1,
            "description": "A confidence score between 0.0 and 1.0 from the advanced model.",
            "example": 0.98
          },
          "reasoning": {
            "type": "string",
            "description": "A detailed text explanation for the advanced detection result, summarizing all findings.",
            "example": "The subject has inconsistent anatomical features (extra finger on left hand) and the background lighting is physically implausible. Metadata analysis confirms the use of an AI generation tool."
          },
          "advance_analysis_results": {
            "$ref": "#/components/schemas/AdvancedAnalysisSubResults"
          }
        },
        "required": [
          "advance_ai_detection_result",
          "advance_ai_detection_score",
          "reasoning",
          "advance_analysis_results"
        ]
      }
    }
  },
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "paths": {
    "/basic_analysis": {
      "post": {
        "tags": ["Analysis"],
        "summary": "Perform Basic AI Detection",
        "description": "Intakes one or more images or videos and returns a basic analysis on whether they were made using AI or had AI modifications.",
        "operationId": "performBasicAnalysis",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "One or more image or video files to be analyzed."
                  },
                  "metadata": {
                    "type": "string",
                    "format": "json",
                    "description": "A JSON string containing metadata about the request.",
                    "example": "{\"userId\": \"user-123\", \"source\": \"web-upload\"}"
                  },
                  "concern": {
                    "type": "string",
                    "description": "A text string describing any specific concerns the user has about the files.",
                    "example": "I think the face in this image might be a deepfake."
                  },
                  "filenames": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "An array of filenames corresponding to the uploaded files.",
                    "example": ["image_01.jpg", "video_promo.mp4"]
                  },
                  "file_formats": {
                     "type": "array",
                     "items": {
                       "type": "string"
                     },
                     "description": "An array of file formats (e.g., mime types) to help map to the filenames.",
                     "example": ["image/jpeg", "video/mp4"]
                  }
                },
                "required": ["files", "filenames"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Analysis completed successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "results": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/BasicAnalysisResult"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. API Key is missing or invalid."
          },
          "400": {
            "description": "Bad Request. The request is malformed (e.g., missing files)."
          }
        }
      }
    },
    "/advance_analysis": {
      "post": {
        "tags": ["Analysis"],
        "summary": "Perform Advanced AI Detection",
        "description": "Intakes one or more images or videos and returns an in-depth analysis using bigger and better models. This includes checks for logical correctness, factual accuracy, heatmaps, watermarks, and file metadata.",
        "operationId": "performAdvancedAnalysis",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "One or more image or video files to be analyzed."
                  },
                  "metadata": {
                    "type": "string",
                    "format": "json",
                    "description": "A JSON string containing metadata about the request.",
                    "example": "{\"userId\": \"user-456\", \"source\": \"api-batch\"}"
                  },
                  "concern": {
                    "type": "string",
                    "description": "A text string describing any specific concerns the user has about the files.",
                    "example": "Please run a full check on this image for a news report."
                  },
                  "filenames": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "An array of filenames corresponding to the uploaded files.",
                    "example": ["evidence_photo.png"]
                  },
                  "file_formats": {
                     "type": "array",
                     "items": {
                       "type": "string"
                     },
                     "description": "An array of file formats (e.g., mime types) to help map to the filenames.",
                     "example": ["image/png"]
                  }
                },
                "required": ["files", "filenames"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Advanced analysis completed successfully.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "results": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/AdvancedAnalysisResult"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized. API Key is missing or invalid."
          },
          "400": {
            "description": "Bad Request. The request is malformed (e.g., missing files)."
          }
        }
      }
    }
  }
}